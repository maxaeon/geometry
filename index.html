<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Interactive Geometry</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
</head>
<body>
    <div id="bg-shapes">
            <svg class="shape" width="80" height="80" style="left:12%; animation-duration:14s; stroke:rgba(255,0,0,0.5);">
                <circle cx="40" cy="40" r="35"></circle>
            </svg>
            <svg class="shape" width="70" height="70" style="left:48%; animation-duration:17s; animation-delay:1s; stroke:rgba(0,128,255,0.5);">
                <rect x="5" y="5" width="60" height="60"></rect>
            </svg>
            <svg class="shape" width="70" height="70" style="left:72%; animation-duration:18s; stroke:rgba(0,200,0,0.5);">
                <polygon points="35,5 65,65 5,65"></polygon>
            </svg>
            <svg class="shape" width="100" height="100" style="left:30%; animation-duration:22s; animation-delay:4s; stroke:rgba(255,165,0,0.5);">
                <polygon points="50,5 90,27 90,73 50,95 10,73 10,27"></polygon>
            </svg>
            <!-- additional shapes -->
            <svg class="shape" width="80" height="80" style="left:5%; animation-duration:13s; animation-delay:3s; stroke:rgba(255,0,0,0.5);">
                <circle cx="40" cy="40" r="35"></circle>
            </svg>
            <svg class="shape" width="70" height="70" style="left:65%; animation-duration:16s; animation-delay:2s; stroke:rgba(0,128,255,0.5);">
                <rect x="5" y="5" width="60" height="60"></rect>
            </svg>
            <svg class="shape" width="70" height="70" style="left:85%; animation-duration:15s; animation-delay:1s; stroke:rgba(0,200,0,0.5);">
                <polygon points="35,5 65,65 5,65"></polygon>
            </svg>
            <svg class="shape" width="100" height="100" style="left:45%; animation-duration:20s; animation-delay:6s; stroke:rgba(255,165,0,0.5);">
                <polygon points="50,5 90,27 90,73 50,95 10,73 10,27"></polygon>
            </svg>
            <svg class="shape" width="80" height="80" style="left:25%; animation-duration:11s; stroke:rgba(255,0,0,0.5);">
                <circle cx="40" cy="40" r="35"></circle>
            </svg>
            <svg class="shape" width="70" height="70" style="left:55%; animation-duration:13s; animation-delay:1s; stroke:rgba(0,128,255,0.5);">
                <rect x="5" y="5" width="60" height="60"></rect>
            </svg>
            <svg class="shape" width="70" height="70" style="left:90%; animation-duration:16s; stroke:rgba(0,200,0,0.5);">
                <polygon points="35,5 65,65 5,65"></polygon>
            </svg>
            <svg class="shape" width="100" height="100" style="left:40%; animation-duration:18s; animation-delay:3s; stroke:rgba(255,165,0,0.5);">
                <polygon points="50,5 90,27 90,73 50,95 10,73 10,27"></polygon>
            </svg>
        </div>
    <div id="mode-selector">
        <div id="mode-content">
            <h1>Interactive Euclidean Geometry</h1>
            <div class="mode-buttons">
                <button id="start-btn">Start</button>
                <button id="dictionary-btn" class="icon-btn" title="Dictionary">&#128214;</button>
                <button id="activities-btn" class="icon-btn" title="Activities/Tutorials">&#128195;</button>
            </div>
        </div>
    </div>
    <div id="toolbar" style="display:none">
        <div id="tool-buttons">
            <button class="tool-btn" data-tool="select" title="Select">&#x270B;</button>
            <button class="tool-btn" data-tool="point" title="Point">&#x25CF;</button>
            <button class="tool-btn" data-tool="circle" title="Circle">&#x25CB;</button>
            <button class="tool-btn" data-tool="line" title="Line">&#x2571;</button>
            <button class="tool-btn" data-tool="dotted" title="Dotted">&#x2022;&#x2022;&#x2022;</button>
            <button class="tool-btn" data-tool="snapshot" title="Copy Shape">‚ßâ</button>
            <button class="tool-btn" data-tool="fill" title="Fill">ü™£</button>
        </div>
        <select id="tool-select">
            <option value="select">Select</option>
            <option value="point">Point</option>
            <option value="circle">Circle</option>
            <option value="line">Solid Line</option>
            <option value="dotted">Dotted Line</option>
            <option value="snapshot">Copy Shape</option>
            <option value="fill">Fill</option>
        </select>
        <input id="color-input" type="color" value="#000000">
        <div id="color-palette"></div>
        <button id="add-color-btn" title="Add Color">+</button>
        <input id="thickness-input" type="range" min="1" max="10" value="1">
        <label><input type="checkbox" id="grid-toggle" checked> Grid</label>
        <button id="clear-btn" class="tool-btn" title="Clear Canvas">üóã</button>
        <button id="undo-btn" class="tool-btn" title="Undo">‚Ü∫</button>
        <button id="redo-btn" class="tool-btn" title="Redo">‚Üª</button>
        <button id="delete-btn" class="tool-btn" title="Delete Selected">‚ùå</button>
        <div id="standards-chip" role="note" aria-live="polite" class="chip hidden"></div>
        <select id="activity-select">
            <option value="">Activities</option>
        </select>
        <button id="prev-activity">Back</button>
        <button id="next-activity">Next</button>
        <button id="skip-activity">Skip</button>
        <button id="info-btn" title="Show Tutorial">&#9432;</button>
        <button id="brain-btn" class="tool-btn" title="More Info">&#129504;</button>
        <button id="dictionary-btn-canvas" class="tool-btn" title="Dictionary">&#128214;</button>
        <div id="teacher-controls">
            <button id="settings-btn" class="tool-btn" title="Settings">‚öôÔ∏è</button>
            <div id="settings-panel" class="hidden" role="region" aria-label="Teacher and settings panel">
                <label for="state-selector">State</label>
                <select id="state-selector">
                    <option value="CA">California</option>
                    <option value="MI">Michigan</option>
                </select>
                <label class="toggle"><input type="checkbox" id="teacher-toggle"> Teacher Mode</label>
                <button id="open-standards-overlay" type="button">View Standards</button>
                <button id="download-evidence" type="button">Download Evidence</button>
            </div>
        </div>
    </div>
    <div id="instruction-panel"></div>
    <div id="canvas-container" style="display:none"></div>
    <div id="info-box">
        <ul>
            <li>Use the tool buttons to draw points, circles or lines.</li>
            <li>Select a shape and press Delete to remove it.</li>
            <li>Use the üóã button to clear the entire canvas.</li>
            <li>Drag with the copy shape tool to copy a small 2x2 grid area.</li>
            <li>Drag a box with the select tool to choose multiple shapes and use ‚ßâ to duplicate them.</li>
            <li>Use Back and Next to move through activity steps.</li>
        </ul>
    </div>
    <div id="dictionary-overlay">
        <div class="dict-content">
            <button id="dict-close" title="Close">&times;</button>
            <h2>Geometry Dictionary</h2>
            <div id="dictionary-filter">
                <label for="dictionary-grade">Grade band</label>
                <select id="dictionary-grade">
                    <option value="K-2">K‚Äì2</option>
                    <option value="3-5">3‚Äì5</option>
                    <option value="6-8">6‚Äì8</option>
                    <option value="HS">HS</option>
                </select>
            </div>
            <ul id="dictionary-list" class="dictionary-list" aria-live="polite"></ul>
            <div id="dictionary-detail" class="hidden">
                <h3 id="flashcard-title"></h3>
                <p id="flashcard-definition"></p>
                <svg id="flashcard-svg" width="200" height="200" role="img" aria-label="Example"></svg>
                <button id="back-to-dictionary">Back</button>
            </div>
        </div>
    </div>
    <div id="advanced-overlay">
        <div class="advanced-content">
            <button id="advanced-close" title="Close">&times;</button>
            <h2>More Information</h2>
            <div id="advanced-formula"></div>
            <canvas id="advanced-canvas" width="200" height="200" style="display:none"></canvas>
            <img id="advanced-image" src="" alt="" style="display:none" />
            <button id="explain-btn">Why?</button>
            <div id="advanced-explanation" style="display:none"></div>
        </div>
    </div>
    <div id="teacher-overlay" class="hidden" role="dialog" aria-modal="true" aria-labelledby="teacher-title">
        <div class="teacher-content">
            <button id="teacher-close" title="Close">&times;</button>
            <h2 id="teacher-title">Teacher Mode</h2>
            <p class="teacher-meta">Learning objectives, prerequisites, and exit tickets align with the selected state standards.</p>
            <section>
                <h3>Standards</h3>
                <a class="standards-meta" target="_blank" rel="noopener">State source</a>
                <ul class="standards-list"></ul>
            </section>
            <section>
                <h3>Activity Planning</h3>
                <p id="teacher-duration">Estimated time: <span data-duration>15 minutes</span></p>
                <p id="teacher-prereqs">Prerequisites: <span data-prereqs>See activity metadata</span></p>
            </section>
            <section>
                <h3>Exit Ticket Seeds</h3>
                <ul class="exit-ticket-list"></ul>
            </section>
        </div>
    </div>
    <div id="activities-overlay">
        <div class="activities-content">
            <button id="activities-close" title="Close">&times;</button>
            <h2>Activities / Tutorials</h2>
            <div id="activities-list"></div>
        </div>
    </div>
    <script type="module" src="activities/index.js"></script>
    <script src="src/constraints/constraintGraph.js"></script>
    <script type="module" src="script.js"></script>
    <script>
        window.addEventListener('load', function(){
            const mc = document.getElementById('mode-content');
            if(mc){
                setTimeout(() => mc.classList.add('show'), 2000);
            }
            setTimeout(() => {
                if(typeof transitionToMode === 'function'){
                    transitionToMode('advanced');
                }
            }, 4000);
        });
    </script>
</body>
</html>
